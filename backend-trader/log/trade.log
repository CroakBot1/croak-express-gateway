// core/logger.js
const fs = require('fs');
const path = require('path');

const logFile = path.join(__dirname, '..', 'log', 'trade.log');

function timestamp() {
  return new Date().toISOString().replace('T', ' ').split('.')[0];
}

function log(level, message) {
  const prefix = {
    info: 'â„¹ï¸ [INFO]',
    warn: 'âš ï¸ [WARN]',
    error: 'âŒ [ERROR]',
    exec: 'âœ… [TRADE]',
    price: 'ðŸ’° [PRICE]',
    strat: 'âš™ï¸ [STRATEGY]',
    swap: 'ðŸ¸ [EXECUTOR]',
  }[level] || '[LOG]';

  const entry = `[${timestamp()}] ${prefix} ${message}`;
  console.log(entry);
  fs.appendFileSync(logFile, entry + '\n');
}

module.exports = {
  info: (msg) => log('info', msg),
  warn: (msg) => log('warn', msg),
  error: (msg) => log('error', msg),
  trade: (msg) => log('exec', msg),
  price: (msg) => log('price', msg),
  strategy: (msg) => log('strat', msg),
  executor: (msg) => log('swap', msg),
};

