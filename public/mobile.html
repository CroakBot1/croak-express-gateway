<!DOCTYPE html>
<html>
<head>
  <title>ðŸ“± Mobile CCTV Camera</title>
</head>
<body style="text-align: center; font-family: sans-serif; background: #000; color: #fff;">
  <h2>ðŸ“· Mobile CCTV Feed</h2>
  <video id="camera" autoplay playsinline width="300"></video>
  <canvas id="canvas" style="display: none;"></canvas>

  <script>
    const video = document.getElementById("camera");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // Start camera
    navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
      video.srcObject = stream;
    });

    function sendFrame() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      ctx.drawImage(video, 0, 0);
      canvas.toBlob(blob => {
        const formData = new FormData();
        formData.append("frame", blob, "frame.jpg");
        fetch("/upload", {
          method: "POST",
          body: formData
        });
      }, "image/jpeg");
    }

    // Send frame every 3 seconds
    setInterval(sendFrame, 3000);
  </script>
</body>
</html>
